<?xml version="1.0" encoding="utf-8"?>
<widget id="mendix.comparedata.CompareData" pluginWidget="true" needsEntityContext="false" offlineCapable="true"
        supportedPlatform="Web"
        xmlns="http://www.mendix.com/widget/1.0/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.mendix.com/widget/1.0/ ../node_modules/mendix/custom_widget.xsd">
    <name>Compare Data</name>
    <description>Widget de comparaison des données de consommation entre assets</description>
    <icon/>
    <properties>
        <!-- ==================== Configuration Générale ==================== -->
        <propertyGroup caption="Configuration">
            <property key="devMode" type="boolean" defaultValue="false">
                <caption>Mode développeur</caption>
                <description>Activer le mode développeur pour les tests</description>
            </property>
            <property key="viewModeConfig" type="enumeration" required="true" defaultValue="energetic">
                <caption>Mode de visualisation</caption>
                <description>Forcer le type de données à afficher (Consommation ou IPE)</description>
                <enumerationValues>
                    <enumerationValue key="energetic">Consommation</enumerationValue>
                    <enumerationValue key="ipe">IPE</enumerationValue>
                </enumerationValues>
            </property>
        </propertyGroup>

        <!-- ==================== Assets Sélectionnés ==================== -->
        <propertyGroup caption="Assets">
        <property key="selectedAsset" type="object" isList="true" required="true">
            <caption>Assets sélectionnés</caption>
            <description>Objet contenant les assets sélectionnés (noms concaténés)</description>
            <properties>
            <property key="selectedAssetName" type="attribute" required="true">
                <caption>Noms des assets</caption>
                <category>Assets</category>
                <description>Noms des assets sélectionnés, séparés par des virgules</description>
                <attributeTypes><attributeType name="String"/></attributeTypes>
            </property>
            </properties>
        </property>

        <property key="dateRange" type="object" isList="true" required="true">
            <caption>Plage de dates</caption>
            <description>Objet contenant les dates de début et fin</description>
            <properties>
            <property key="startDateAttr" type="attribute" required="true">
                <caption>Date de début</caption>
                <category>Assets</category>
                <description>Attribut date de début</description>
                <attributeTypes><attributeType name="DateTime"/></attributeTypes>
            </property>
            <property key="endDateAttr" type="attribute" required="true">
                <caption>Date de fin</caption>
                <category>Assets</category>
                <description>Attribut date de fin</description>
                <attributeTypes><attributeType name="DateTime"/></attributeTypes>
            </property>
            </properties>
        </property>
        </propertyGroup>


        <!-- ==================== Données Temporelles ==================== -->
        <propertyGroup caption="Données">
            <property key="timeSeriesDataSource" type="datasource" isList="true" required="true">
                <caption>Données temporelles</caption>
                <description>Source de données des séries temporelles calculées</description>
            </property>
            <property key="timestampAttr" type="attribute" dataSource="timeSeriesDataSource" required="true">
                <caption>Timestamp</caption>
                <description>Attribut timestamp des données</description>
                <attributeTypes>
                    <attributeType name="DateTime"/>
                </attributeTypes>
            </property>
            <property key="valueAttr" type="attribute" dataSource="timeSeriesDataSource" required="true">
                <caption>Valeur</caption>
                <description>Attribut valeur des données</description>
                <attributeTypes>
                    <attributeType name="Decimal"/>
                </attributeTypes>
            </property>
            <property key="assetNameAttr" type="attribute" dataSource="timeSeriesDataSource" required="true">
                <caption>Nom Asset</caption>
                <description>Attribut nom de l'asset associé</description>
                <attributeTypes>
                    <attributeType name="String"/>
                </attributeTypes>
            </property>
            <property key="metricTypeAttr" type="attribute" dataSource="timeSeriesDataSource" required="false">
                <caption>Type métrique</caption>
                <description>Attribut type de métrique (Conso, IPE, etc.)</description>
                <attributeTypes>
                    <attributeType name="Enum"/>
                </attributeTypes>
            </property>
            <property key="energyTypeAttr" type="attribute" dataSource="timeSeriesDataSource" required="false">
                <caption>Type énergie</caption>
                <description>Attribut type d'énergie (Elec, Gaz, Eau, Air)</description>
                <attributeTypes>
                    <attributeType name="Enum"/>
                </attributeTypes>
            </property>
        </propertyGroup>

        <!-- ==================== Variables des Assets ==================== -->
        <propertyGroup caption="Variables des Assets">
            <property key="assetVariablesDataSource" type="datasource" isList="true" required="false">
                <caption>Variables des assets</caption>
                <description>Liste des variables des assets sélectionnés pour récupérer les unités automatiquement</description>
            </property>
            <property key="variableNameAttr" type="attribute" dataSource="assetVariablesDataSource" required="false">
                <caption>Nom Variable</caption>
                <description>Attribut contenant le nom de la variable</description>
                <attributeTypes>
                    <attributeType name="String"/>
                </attributeTypes>
            </property>
            <property key="variableUnitAttr" type="attribute" dataSource="assetVariablesDataSource" required="false">
                <caption>Unité Variable</caption>
                <description>Attribut contenant l'unité de la variable</description>
                <attributeTypes>
                    <attributeType name="String"/>
                </attributeTypes>
            </property>
            <property key="variableMetricTypeAttr" type="attribute" dataSource="assetVariablesDataSource" required="false">
                <caption>Type Métrique Variable</caption>
                <description>Attribut contenant le type de métrique de la variable</description>
                <attributeTypes>
                    <attributeType name="Enum"/>
                </attributeTypes>
            </property>
            <property key="variableEnergyTypeAttr" type="attribute" dataSource="assetVariablesDataSource" required="false">
                <caption>Type Énergie Variable</caption>
                <description>Attribut contenant le type d'énergie de la variable</description>
                <attributeTypes>
                    <attributeType name="Enum"/>
                </attributeTypes>
            </property>
        </propertyGroup>

        <!-- ==================== Contrôles d'Affichage ==================== -->
        <propertyGroup caption="Contrôles d'Affichage">
            <property key="displayModeAttr" type="attribute" required="false">
                <caption>Attribut Mode (Écriture)</caption>
                <description>Attribut pour stocker le changement de mode d'affichage</description>
                <attributeTypes>
                    <attributeType name="Enum"/>
                </attributeTypes>
            </property>
            <property key="displayTimeAttr" type="attribute" required="false">
                <caption>Attribut Temps (Écriture)</caption>
                <description>Attribut pour stocker le changement de temps</description>
                <attributeTypes>
                    <attributeType name="Integer"/>
                </attributeTypes>
            </property>
            <property key="displayUnitAttr" type="attribute" required="false">
                <caption>Attribut Unité (Écriture)</caption>
                <description>Attribut pour stocker le changement d'unité</description>
                <attributeTypes>
                    <attributeType name="Enum"/>
                </attributeTypes>
            </property>
            <property key="displayPreviewOKAttr" type="attribute" required="false">
                <caption>Attribut Preview OK (Écriture)</caption>
                <description>Attribut pour confirmer les changements</description>
                <attributeTypes>
                    <attributeType name="Boolean"/>
                </attributeTypes>
            </property>
            <property key="bufferModeAttr" type="attribute" required="false">
                <caption>Attribut Mode Buffer (Écriture)</caption>
                <description>Attribut pour le buffer de mode</description>
                <attributeTypes>
                    <attributeType name="Enum"/>
                </attributeTypes>
            </property>
            <property key="bufferTimeAttr" type="attribute" required="false">
                <caption>Attribut Time Buffer (Écriture)</caption>
                <description>Attribut pour le buffer de temps</description>
                <attributeTypes>
                    <attributeType name="Integer"/>
                </attributeTypes>
            </property>
            <property key="bufferUnitAttr" type="attribute" required="false">
                <caption>Attribut Unit Buffer (Écriture)</caption>
                <description>Attribut pour le buffer d'unité</description>
                <attributeTypes>
                    <attributeType name="Enum"/>
                </attributeTypes>
            </property>
            <property key="onModeChange" type="action" required="false">
                <caption>On Mode Change</caption>
                <description>Microflow à exécuter quand le mode change</description>
            </property>
            <property key="onTimeChange" type="action" required="false">
                <caption>On Time/Unit Change</caption>
                <description>Microflow à exécuter quand la valeur ou l'unité change</description>
            </property>
        </propertyGroup>

        <!-- ==================== Feature Toggles ==================== -->
        <propertyGroup caption="Feature Toggles">
            <property key="featureList" type="datasource" isList="true" required="false">
                <caption>FeatureToggle – liste activée</caption>
                <description>Liste des features activées pour ce widget</description>
            </property>
            <property key="featureNameAttr" type="attribute" dataSource="featureList" required="false">
                <caption>Attribut FeatureName</caption>
                <description>Attribut contenant le nom de la feature</description>
                <attributeTypes>
                    <attributeType name="Enum"/>
                </attributeTypes>
            </property>
        </propertyGroup>

        <!-- ==================== Actions ==================== -->
        <propertyGroup caption="Actions">
            <property key="onAddProductionClick" type="action" required="false">
                <caption>Action de saisie de production</caption>
                <description>Action à exécuter pour naviguer vers la page de saisie de production</description>
            </property>
        </propertyGroup>
    </properties>
</widget>