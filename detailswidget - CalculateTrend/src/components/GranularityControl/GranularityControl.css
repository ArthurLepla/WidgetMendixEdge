/* 
 * GranularityControl avec Ant Design - Design System Intégré
 * Fusion harmonieuse entre Ant Design et notre palette de couleurs
 */

/* Variables CSS pour cohérence avec Ant Design */
:root {
  --granularity-primary: #18213e;
  --granularity-electric: #38a13c;
  --granularity-gas: #f9be01;
  --granularity-water: #3293f3;
  --granularity-air: #66d8e6;
}

/* Container principal avec Ant Design Card */
.granularity-control-antd {
  font-family: 'Barlow', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

.granularity-card {
  min-height: 60px;
  transition: all 0.3s ease;
}

.granularity-card-light {
  background: #ffffff !important;
}

.granularity-card-light .ant-card-body {
  background: #ffffff !important;
  border-radius: 12px;
}

.granularity-card:hover {
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
  border-color: #cbd5e1 !important;
}

.granularity-content {
  width: 100%;
  align-items: center;
}

/* Mode Section avec Segmented Ant Design */
.mode-section {
  display: flex;
  align-items: center;
  flex-shrink: 0;
}

/* Segmented Control moderne */
.granularity-segmented {
  background: #f1f5f9 !important;
  border-radius: 8px !important;
  padding: 4px !important;
  border: none !important;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1) !important;
}

.granularity-segmented .ant-segmented-item {
  border-radius: 6px !important;
  border: none !important;
  transition: all 0.2s ease !important;
  font-weight: 500 !important;
}

.granularity-segmented .ant-segmented-item-selected {
  background: var(--granularity-primary) !important;
  color: white !important;
  box-shadow: 0 2px 4px rgba(24, 33, 62, 0.2) !important;
}

.granularity-segmented .ant-segmented-item:hover:not(.ant-segmented-item-selected) {
  background: rgba(24, 33, 62, 0.08) !important;
}

.toggle-option {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 2px 4px;
  font-size: 13px;
  font-weight: 500;
}

.toggle-option span {
  font-size: 13px;
  line-height: 1;
}

/* Auto Section */
.auto-section {
  flex: 1;
  min-width: 200px;
}

.auto-content {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

/* Strict Section */
.strict-section {
  flex: 1;
  min-width: 250px;
}

/* Customisation des composants Ant Design pour intégration */

/* Select personnalisé */
.granularity-control-antd .ant-select {
  font-weight: 500;
}

.granularity-control-antd .ant-select-selector {
  border: 1px solid #e2e8f0 !important;
  border-radius: 6px !important;
  background: #f8fafc !important;
  transition: all 0.2s ease !important;
}

.granularity-control-antd .ant-select-selector:hover {
  border-color: #cbd5e1 !important;
  background: white !important;
}

.granularity-control-antd .ant-select-focused .ant-select-selector {
  border-color: var(--granularity-electric) !important;
  box-shadow: 0 0 0 2px rgba(56, 161, 60, 0.1) !important;
  background: white !important;
}

.granularity-control-antd .ant-select-selection-item {
  color: var(--granularity-primary) !important;
  font-weight: 500 !important;
}

/* Option disabled styling */
.granularity-control-antd .ant-select-item-option-disabled {
  color: #94a3b8 !important;
  background: #f1f5f9 !important;
}

/* Button suggestions personnalisé */
.granularity-control-antd .ant-btn-primary {
  background-color: var(--granularity-gas) !important;
  border-color: var(--granularity-gas) !important;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05) !important;
}

.granularity-control-antd .ant-btn-primary:hover {
  background-color: #e6a800 !important;
  border-color: #e6a800 !important;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
}

/* Popover suggestions personnalisé */
.granularity-suggestions-popover .ant-popover-inner {
  border-radius: 8px !important;
  overflow: hidden !important;
  padding: 0 !important;
}

.granularity-suggestions-popover .ant-popover-arrow {
  display: none !important;
}

/* Contenu des suggestions */
.suggestions-content {
  min-width: 280px;
}

.suggestions-header {
  padding: 12px 16px;
  background: #f8fafc;
  border-bottom: 1px solid #e2e8f0;
}

.suggestions-list {
  padding: 8px;
}

.suggestion-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 12px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s ease;
  margin-bottom: 4px;
}

.suggestion-item:last-child {
  margin-bottom: 0;
}

.suggestion-item:hover {
  background-color: #f8fafc !important;
}

.suggestion-text {
  display: flex;
  flex-direction: column;
  gap: 4px;
  text-align: left;
}

/* Typography Ant Design personnalisé */
.granularity-control-antd .ant-typography {
  margin-bottom: 0 !important;
}

/* Responsive Design */
@media (max-width: 1024px) {
  .granularity-content {
    flex-direction: column;
    align-items: stretch !important;
    gap: 16px !important;
  }
  
  .mode-section {
    justify-content: center;
  }
  
  .auto-section,
  .strict-section {
    min-width: 0;
    width: 100%;
  }
  
  .strict-section .ant-space {
    width: 100%;
    justify-content: space-between;
  }
}

@media (max-width: 768px) {
  .granularity-card {
    margin: 0 !important;
  }
  
  .granularity-content {
    gap: 12px !important;
  }
  
  .strict-section .ant-space {
    flex-direction: column !important;
    align-items: stretch !important;
    gap: 12px !important;
  }
  
  .strict-section .ant-select {
    width: 100% !important;
  }
  
  .suggestions-content {
    min-width: 250px;
  }
}

@media (max-width: 640px) {
  .granularity-card .ant-card-body {
    padding: 12px !important;
  }
  
  .auto-content {
    text-align: center;
  }
  
  .suggestions-content {
    min-width: 220px;
  }
}

/* Focus et accessibilité */
.granularity-control-antd .ant-segmented:focus-within {
  outline: 2px solid var(--granularity-primary) !important;
  outline-offset: 2px !important;
}

.granularity-control-antd .ant-select:focus-within {
  outline: 2px solid var(--granularity-electric) !important;
  outline-offset: 2px !important;
}

.granularity-control-antd .ant-btn:focus {
  outline: 2px solid var(--granularity-electric) !important;
  outline-offset: 2px !important;
}

/* Disabled state */
.granularity-control-antd[data-disabled="true"] {
  opacity: 0.6;
  pointer-events: none;
}

/* Animation pour les transitions */
.granularity-control-antd * {
  box-sizing: border-box;
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  .granularity-control-antd .ant-card {
    background: #1e293b !important;
    border-color: #334155 !important;
  }
  
  .granularity-control-antd .ant-select-selector {
    background: #334155 !important;
    border-color: #475569 !important;
    color: #f1f5f9 !important;
  }
  
  .suggestions-header {
    background: #334155 !important;
    border-color: #475569 !important;
  }
  
  .suggestions-content {
    background: #1e293b !important;
  }
}

/* Override pour éviter les conflits */
.granularity-control-antd .ant-space-item:empty {
  display: none !important;
}

/* Amélioration des transitions */
.granularity-control-antd .ant-select-dropdown {
  border-radius: 8px !important;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;
}

.granularity-control-antd .ant-select-item {
  border-radius: 4px !important;
  margin: 2px 4px !important;
}

.granularity-control-antd .ant-select-item-option-selected {
  background-color: rgba(56, 161, 60, 0.1) !important;
  color: var(--granularity-electric) !important;
  font-weight: 600 !important;
} 